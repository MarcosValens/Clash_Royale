<!--EJECUTAR npm run build PARA VER LAS FUENTES CORRECTAMENTE!!!!-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="./dist/bundle.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="icon" href="" id="icon">
</head>
<body>
<img src="./assets/src/images/logo-1.png" id="logo" alt="logo_ClashRoyale">
<header class="mdc-top-app-bar mdc-top-app-bar--short nav">
    <div class="mdc-top-app-bar__row">
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
            <a href="#" class="material-icons mdc-top-app-bar__navigation-icon">menu</a>
            <span class="mdc-top-app-bar__title">Clash Royale</span>
        </section>
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end" role="toolbar">
            <a href="#" class="material-icons mdc-top-app-bar__action-item" aria-label="Bookmark this page"
               alt="Bookmark this page">bookmark</a>
        </section>
    </div>
</header>
<main>
    <header>
        <div class="mdc-card">
            <div class="mdc-card__actions">
                <div class="mdc-card__action-buttons">
                    <div>
                        <button class="mdc-button mdc-card__action mdc-card__action--button"></button>
                    </div>
                    <div>
                        <button class="mdc-button mdc-card__action mdc-card__action--button"></button>
                    </div>
                    <div>
                        <button class="mdc-button mdc-card__action mdc-card__action--button"></button>
                    </div>
                </div>
            </div>
            <div class="mdc-card__actions">
                <button class="mdc-button mdc-card__action mdc-card__action--button"></button>
            </div>
        </div>
    </header>
    <div id="list"></div>
</main>
<script type="module">
    import {getClanByTag, getClanMembers} from "./assets/src/service/clanService.js"
    import {card,headTableMembers} from "./assets/src/utils/constants.js"

    window.onload = async function () {
        let clan = await getClanByTag()
        let members = await getClanMembers(clan[0].tag);
        card[1].childNodes[1].children[0].children[0].innerHTML = clan[0].name
        card[1].childNodes[1].children[1].children[0].innerHTML = clan[0].tag
        card[1].childNodes[1].children[2].children[0].innerHTML = clan[0].country
        card[3].children[0].innerHTML = clan[0].description
        drawTable(members)
    }

    function drawTable(members) {
        let table = headTableMembers
        list.innerHTML = table
        members.forEach(function (member) {
            let tag = member.tag
            tag = tag.split('#').join('%23')
            table += '<tr>'
            table += '<td><button id="' + member.name + '" onclick="location.href=\'player.html?tag=' + tag + '\'">'
            table += '<img src="./assets/src/images/Clash_Royale.png" alt="CrownIcon" width="256" height="256">'
            table += '</button>' + member.name + '</td>'
            table += '<td>' + member.tag + '</td>'
            table += '<td>' + member.role + '</td>'
            table += '<td>' + member.trophies + '</td>'
            table += '<td>' + member.arena + '</td>'
            table += '<td>' + member.donations + '</td>'
            table += '<td>' + member.donationsReceived + '</td>'
            table += '</tr>'
        })
        list.innerHTML = table
    }
</script>
<script src="./dist/bundle.js" async></script>
</body>
</html>
